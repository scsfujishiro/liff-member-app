<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
  // LIFFアプリの初期化
  liff.init({ liffId: "2007071670-Zvq5GyEg" })
    .then(() => {
      // ログイン状態チェック
      if (!liff.isLoggedIn()) {
        liff.login(); // 未ログインならログイン
        return;
      }

      // プロフィール取得
      liff.getProfile()
        .then(profile => {
          const userId = profile.userId;

          // 遷移先のURLにユーザーIDを付与してリダイレクト
          const redirectUrl = `https://jamy.biz/testform05.html?userId=${encodeURIComponent(userId)}`;
          window.location.href = redirectUrl;
        })
        .catch(err => {
          console.error('プロフィール取得エラー:', err);
        });
    })
    .catch(err => {
      console.error('LIFF初期化エラー:', err);
    });
</script>
